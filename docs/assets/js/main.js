"use strict";const btn=document.querySelector(".js-btn"),listShows=document.querySelector(".js-list-shows"),listFavorites=document.querySelector(".js-list-favorites"),searcher=document.querySelector("#searcher");let shows=[],showsFavorites=[];function createListshows(s){for(let e=0;e<s.length;e++)null===s[e].show.image?shows[e]={image:"https://via.placeholder.com/210x295/ffffff/666666/?text=TV",name:s[e].show.name}:shows[e]={image:s[e].show.image.medium,name:s[e].show.name}}function paintshows(){let s="",e="";for(let s=0;s<showsFavorites.length;s++)e+=`<li class="shows__item__fav" id="${[s]}">`,e+='<div class="shows__container__fav">',e+=`<img class="shows__container__fav--img" src="${showsFavorites[s].image}" title="${showsFavorites[s].name}" alt="${showsFavorites[s].name}">`,e+=`<h3 class="shows__container__fav--name">${showsFavorites[s].name}</h3>`,e+="</div>",e+="</li>";for(let e=0;e<shows.length;e++)s+=`<li class="shows__item" id="${[e]}">`,s+='<div class="shows__container">',s+=`<img class="shows__container--img"src="${shows[e].image}" title="${shows[e].name}" alt="${shows[e].name}">`,s+=`<h3 class="shows__container--name">${shows[e].name}</h3>`,s+="</div>",s+="</li>";listFavorites.innerHTML=e,listShows.innerHTML=s}function toggleFavorites(s){let e=!1;const o=parseInt(s.currentTarget.id);if(0===showsFavorites.length)showsFavorites.push({id:0,image:`${shows[o].image}`,name:`${shows[o].name}`}),console.log("Se ha añadido en Favs 0");else{for(let s=0;s<showsFavorites.length;s++)shows[o].name===showsFavorites[s].name&&(showsFavorites.splice(s,1),console.log("Se ha eliminado: "+s+"Favoritos es: "+showsFavorites),e=!0,console.log("Ha encontrado a favorito"));!1===e&&(showsFavorites.push({id:showsFavorites.length,image:`${shows[o].image}`,name:`${shows[o].name}`}),console.log("Favorito se ha añadido"))}console.log("La longitud es "+showsFavorites.length),console.log("Los favs son: "+showsFavorites),paintshows(),listenshows()}function listenshows(){const s=document.querySelectorAll(".shows__item");for(const e of s)e.addEventListener("click",toggleFavorites)}function getServerData(){fetch(`https://api.tvmaze.com/search/shows?q=${searcher.value}`).then(function(s){return s.json()}).then(function(s){createListshows(s),paintshows(),listenshows()}).catch(function(s){console.log("Error al traer los datos del servidor",s)})}function handler(s){s.preventDefault(),getServerData()}btn.addEventListener("click",handler);