"use strict";const btn=document.querySelector(".js-btn"),listShows=document.querySelector(".js-list-shows"),listFavorites=document.querySelector(".js-list-favorites"),searcher=document.querySelector("#searcher");let shows=[],favoritesShows=[];function setLocalStorage(){localStorage.setItem("favoritesShows",JSON.stringify(favoritesShows))}function getLocalStorage(){const s=JSON.parse(localStorage.getItem("favoritesShows"));null!==s&&(favoritesShows=s,paintshows(),showNamesFavorites())}function createListshows(s){for(let e=0;e<s.length;e++)null===s[e].show.image?shows[e]={image:"https://via.placeholder.com/210x295/ffffff/666666/?text=TV",name:s[e].show.name,days:s[e].show.schedule.days}:shows[e]={image:s[e].show.image.medium,name:s[e].show.name,days:s[e].show.schedule.days}}function paintshows(){let s="",e="";for(let s=0;s<favoritesShows.length;s++)e+=`<li class="shows__item__fav" id="${[s]}">`,e+='<span class="close__btn"  style="cursor:pointer">&times;</span>',e+='<div class="shows__container__fav">',e+=`<img class="shows__container__fav--img" src="${favoritesShows[s].image}" title="${favoritesShows[s].name}" alt="${favoritesShows[s].name}">`,e+=`<h3 class="shows__container__fav--name">${favoritesShows[s].name}</h3>`,e+="</div>",e+="</li>";for(let e=0;e<shows.length;e++)s+=`<li class="shows__item" id="${[e]}">`,s+='<div class="shows__container"  style="cursor:pointer">',s+=`<img class="shows__container--img"src="${shows[e].image}" title="${shows[e].name}" alt="${shows[e].name}">`,s+=`<h3 class="shows__container--name">${shows[e].name}</h3>`,s+=`<p class="shows__container--days">${shows[e].days}</p>`,s+="</div>",s+="</li>";listFavorites.innerHTML=e,listShows.innerHTML=s,listenShows(),listenFavorites(),showNamesFavorites()}function toggleShows(s){let e=!1;const o=parseInt(s.currentTarget.id);if(0===favoritesShows.length)favoritesShows.push({id:0,image:`${shows[o].image}`,name:`${shows[o].name}`});else{for(let s=0;s<favoritesShows.length;s++)shows[o].name===favoritesShows[s].name&&(favoritesShows.splice(s,1),e=!0);!1===e&&favoritesShows.push({id:favoritesShows.length,image:`${shows[o].image}`,name:`${shows[o].name}`})}setLocalStorage(),paintshows(),listenShows(),listenFavorites()}function deleteFavorites(s){const e=parseInt(s.currentTarget.id);favoritesShows.splice(e,1),setLocalStorage(),paintshows(),listenShows(),listenFavorites()}function showMeFavorites(s){const e=parseInt(s.currentTarget.id);console.log(favoritesShows[e].name),listenShows(),listenFavorites(),showNamesFavorites()}function listenShows(){const s=document.querySelectorAll(".shows__item");for(const e of s)e.addEventListener("click",toggleShows)}function listenFavorites(){const s=document.querySelectorAll(".close__btn");for(const e of s)e.addEventListener("click",deleteFavorites)}function showNamesFavorites(){const s=document.querySelectorAll(".shows__item__fav");for(const e of s)e.addEventListener("click",showMeFavorites)}function getServerData(){fetch(`https://api.tvmaze.com/search/shows?q=${searcher.value}`).then(function(s){return s.json()}).then(function(s){createListshows(s),paintshows(),listenShows(),listenFavorites()}).catch(function(s){console.log("Error al traer los datos del servidor",s)})}function handler(s){s.preventDefault(),getServerData()}getLocalStorage(),btn.addEventListener("click",handler);